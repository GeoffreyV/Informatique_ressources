\documentclass[QCM, noCustomPackages]{UPSTI_Document}
\usepackage{IUT_Annecy}
\usepackage{logos_iut}
\input{../preamble.tex}
\input{../../preamble_module.tex}

\input{sources/niveau.tex}
\input{sources/niveau1.tex}
\input{sources/niveau2.tex}
\input{sources/niveau3.tex}
\input{sources/questions.tex}

\documentVersion{E}
\newcommand{\UPSTInumeroVersion}{0}
\newcommand{\UPSTImessage}{test} 

\newcommand{\sujet}{% Début de la boucle sur les étudiants
\exemplaire{1}{%
\renewcommand{\UPSTImessage}{\champnom{\nom{} \prenom{}} Niveau \level } 
\renewcommand{\UPSTInumeroVersion}{\id{}}
\UPSTIbuildPage
\setcounter{figure}{0}
\setcounter{table}{0}

\insertgroup{niveau}

    % Sélection selon le niveau
    \ifthenelse{\equal{\level}{1}}{%
      \insertgroup[3]{niveau1}%
      \insertgroup[1]{niveau2}%
    }{}
    \ifthenelse{\equal{\level}{2}}{%
      \insertgroup[2]{niveau1}%
      \insertgroup[1]{niveau2}%
      \insertgroup[1]{niveau3}%
    }{}
    \ifthenelse{\equal{\level}{3}}{%
      \insertgroup[1]{niveau1}%
      \insertgroup[1]{niveau2}%
      \insertgroup[2]{niveau3}%
    }{}


    \clearpage
}
}




\begin{document}
\AMCrandomseed{1237893}
\def\AMCformQuestion#1{{\sc Question #1 :}}
\csvreader[head to column names,]{students.csv}{}{\sujet}
\end{document}